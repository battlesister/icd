<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find comorbidities from ICD-9 codes. — comorbid • icd: Comorbidities and tools for ICD codes</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Find comorbidities from ICD-9 codes. — comorbid" />
<meta property="og:description" content="This is the main function which extracts comorbidities from a set of ICD-9
codes. Some comorbidity schemes have rules, for example, what to do when both
'hypertension' and 'hypertension with complications' are present. These rules
are applied by default; if the exact fields from the original mappings are
needed, use hierarchy = FALSE. For comorbidity counting, Charlson or
Van Walraven scores the default should be used to apply the rules. For more
about computing Hierarchical Condition Codes (HCC), see
comorbid_hcc For more about comorbidities following the
Clinical Classification Software (CCS) rules from AHRQ, see
comorbid_ccs." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">icd: Comorbidities and tools for ICD codes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.0.9.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jackwasey/icd/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find comorbidities from ICD-9 codes.</h1>
    <small class="dont-index">Source: <a href='https://github.com/jackwasey/icd/blob/master/R/comorbid.R'><code>R/comorbid.R</code></a>, <a href='https://github.com/jackwasey/icd/blob/master/R/comorbid_pccc.R'><code>R/comorbid_pccc.R</code></a></small>
    <div class="hidden name"><code>comorbid.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is the main function which extracts comorbidities from a set of ICD-9
codes. Some comorbidity schemes have rules, for example, what to do when both
'hypertension' and 'hypertension with complications' are present. These rules
are applied by default; if the exact fields from the original mappings are
needed, use <code>hierarchy = FALSE</code>. For comorbidity counting, Charlson or
Van Walraven scores the default should be used to apply the rules. For more
about computing Hierarchical Condition Codes (HCC), see
<code><a href='comorbid_hcc.html'>comorbid_hcc</a></code> For more about comorbidities following the
Clinical Classification Software (CCS) rules from AHRQ, see
<code>comorbid_ccs</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>comorbid</span>(
  <span class='no'>x</span>,
  <span class='no'>map</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_code</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>x</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='no'>icd_name</span>),
  <span class='kw'>short_map</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>map</span>),
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>categorize_fun</span> <span class='kw'>=</span> <span class='no'>categorize_simple</span>,
  <span class='no'>...</span>
)

<span class='fu'>icd10_comorbid</span>(
  <span class='no'>x</span>,
  <span class='no'>map</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_code</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_map</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>map</span>),
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>icd10_comorbid_fun</span> <span class='kw'>=</span> <span class='no'>icd10_comorbid_reduce</span>,
  <span class='no'>...</span>
)

<span class='fu'>icd9_comorbid</span>(
  <span class='no'>x</span>,
  <span class='no'>map</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_code</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>x</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='no'>icd_name</span>),
  <span class='kw'>short_map</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>map</span>),
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>preclean</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>categorize_fun</span> <span class='kw'>=</span> <span class='no'>categorize_simple</span>,
  <span class='kw'>comorbid_fun</span> <span class='kw'>=</span> <span class='no'>comorbid_mat_mul_wide</span>,
  <span class='no'>...</span>
)

<span class='fu'>icd9_comorbid_ahrq</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd10_comorbid_ahrq</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd9_comorbid_elix</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd10_comorbid_elix</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd9_comorbid_quan_elix</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd10_comorbid_quan_elix</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd9_comorbid_quan_deyo</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd10_comorbid_quan_deyo</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>hierarchy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>icd9_comorbid_charlson</span>(<span class='no'>...</span>)

<span class='fu'>icd10_comorbid_charlson</span>(<span class='no'>...</span>)

<span class='fu'>comorbid_ccs</span>(<span class='no'>x</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='fu'>get_icd_name</span>(<span class='no'>x</span>), <span class='no'>...</span>)

<span class='fu'>icd9_comorbid_ccs</span>(
  <span class='no'>x</span>,
  <span class='no'>...</span>,
  <span class='kw'>single</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>lvl</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>map</span> <span class='kw'>=</span> <span class='kw pkg'>icd</span><span class='kw ns'>::</span><span class='no'><a href='icd9_map_single_ccs.html'>icd9_map_single_ccs</a></span>,
  <span class='kw'>short_map</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='fu'>icd10_comorbid_ccs</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>single</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>lvl</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>comorbid_ahrq</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>comorbid_elix</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>comorbid_quan_elix</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>comorbid_quan_deyo</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>comorbid_charlson</span>(<span class='no'>...</span>)

<span class='fu'>comorbid_pccc_dx</span>(
  <span class='no'>x</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='fu'>get_visit_name</span>(<span class='no'>x</span>),
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='fu'>get_icd_name</span>(<span class='no'>x</span>),
  <span class='kw'>short_code</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>x</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='no'>icd_name</span>),
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)

<span class='fu'>comorbid_pccc_pcs</span>(
  <span class='no'>x</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='fu'>get_visit_name</span>(<span class='no'>x</span>),
  <span class='no'>icd_name</span>,
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)

<span class='fu'>icd9_comorbid_pccc_dx</span>(
  <span class='no'>x</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_code</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>x</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='no'>icd_name</span>),
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>,
  <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='fu'>icd10_comorbid_pccc_dx</span>(
  <span class='no'>x</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_code</span> <span class='kw'>=</span> <span class='fu'><a href='guess_short.html'>guess_short</a></span>(<span class='no'>x</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='no'>icd_name</span>),
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>,
  <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='fu'>icd9_comorbid_pccc_pcs</span>(
  <span class='no'>x</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='fu'>get_visit_name</span>(<span class='no'>x</span>),
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='fu'>get_icd_pc_name</span>(<span class='no'>x</span>),
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>,
  <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='fu'>icd10_comorbid_pccc_pcs</span>(
  <span class='no'>x</span>,
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='fu'>get_visit_name</span>(<span class='no'>x</span>),
  <span class='no'>icd_name</span>,
  <span class='kw'>return_df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>,
  <span class='kw'>abbrev_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>data.frame</code> containing a column of patient-visit identifiers
and a column of ICD codes. The <code>data.frame</code> may be in &#8216;long&#8217; or
&#8216;wide&#8217; format, like the example <code><a href='vermont_dx.html'>vermont_dx</a></code>
and <code><a href='uranium_pathology.html'>uranium_pathology</a></code> data.</p></td>
    </tr>
    <tr>
      <th>map</th>
      <td><p>A named list of the comorbidities with each list item containing a
vector of decimal ICD-9 codes. <span class="pkg">icd</span> includes a number of these, e.g.,
<code><a href='icd9_map_elix.html'>icd9_map_elix</a></code>. Alternatively, this can be omitted if the
convenience functions, such as <code>icd10_comorbid_charlson</code> are used
directly. <code>map</code> should be in the form of a list, with the names of the
items corresponding to the comorbidities (e.g. &#8216;HTN&#8217;, or
&#8216;diabetes&#8217;) and the contents of each list item being a character
vector of short-form (no decimal place, zero left-padded) ICD codes. There
is no default: the user should use the family of functions, e.g.
<code>comorbid_ahrq</code>, since these also name the fields correctly, and these
functions also apply any hierarchical rules (see <code>hierarchy</code> below)</p></td>
    </tr>
    <tr>
      <th>visit_name</th>
      <td><p>The name of the column in the data frame which contains the
patient or visit identifier. Typically this is the visit identifier, since
patients come leave and enter hospital with different ICD-9 codes. It is a
character vector of length one. If left empty, or <code>NULL</code>, then an
attempt is made to guess which field has the ID for the patient encounter
(not a patient ID, although this can of course be specified directly). The
guesses proceed until a single match is made. Data frames may be wide with
many matching fields, so to avoid false positives, anything but a single
match is rejected. If there are no successful guesses, and <code>visit_id</code>
was not specified, then the first column of the data frame is used.</p></td>
    </tr>
    <tr>
      <th>icd_name</th>
      <td><p>The name of the column in the <code>data.frame</code> which
contains the ICD codes. This is a character vector of length one. If it is
<code>NULL</code>, <code>icd9</code> will attempt to guess the column name, looking for
progressively less likely possibilities until it matches a single column.
Failing this, it will take the first column in the data frame. Specifying
the column using this argument avoids the guesswork.</p></td>
    </tr>
    <tr>
      <th>short_code</th>
      <td><p>single logical value which determines whether the ICD-9
code provided is in short (<code>TRUE</code>) or decimal (<code>FALSE</code>) form.
Where reasonable, this is guessed from the input data.</p></td>
    </tr>
    <tr>
      <th>short_map</th>
      <td><p>Same as short, but applied to <code>map</code> instead of the data
frame of ICD codes, <code>x</code>. All the codes in a mapping should be of the
same type, i.e. short or decimal.</p></td>
    </tr>
    <tr>
      <th>return_df</th>
      <td><p>single logical value, if <code>TRUE</code>, return 'tidy' data,
i.e., the result is a data frame with the first column being the
<code>visit_id</code>, and the second being the count. If <code>visit_id</code> was a
factor or named differently in the input, this is preserved.</p></td>
    </tr>
    <tr>
      <th>return_binary</th>
      <td><p>Single logical value, if <code>TRUE</code>, the returned
<code>matrix</code> or <code>data.frame</code> will be composed of <code>1</code> and
<code>0</code>, instead of <code>TRUE</code> and <code>FALSE</code>, respectively. This
conversion can also be done by the internal functions
<code>icd:::logical_to_binary</code> and <code>icd:::binary_to_logical</code>, or using
other tools, e.g. <code><a href='https://rdrr.io/r/base/apply.html'>apply(x, 2, as.integer)</a></code></p></td>
    </tr>
    <tr>
      <th>categorize_fun</th>
      <td><p>Internal. Function used for the categorization problem.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed through to <code>comorbid</code>, and ultimately <code><a href='categorize_simple.html'>categorize_simple</a></code>, e.g. <code>restore_id_order</code>.</p></td>
    </tr>
    <tr>
      <th>icd10_comorbid_fun</th>
      <td><p>Internal function Default will be fast and
accurate. A function which calculates comorbidities for ICD-10 codes, in
which the comorbidity map only specifies parent codes, not every possible
child.</p></td>
    </tr>
    <tr>
      <th>preclean</th>
      <td><p>single logical value, which, if <code>TRUE</code> causes ICD-9
'short' code input to be padded to correct three (or four for E code)
length before applying the comorbidity map. For very large data sets, e.g.
ten million rows, this is much slower than the comorbidity calculation. If
you know that the source ICD-9 codes are already well formed (or have
already run <code>icd9_add_leading_zeroes</code>), then <code>preclean</code> can be
set to <code>FALSE</code> to save time.</p></td>
    </tr>
    <tr>
      <th>comorbid_fun</th>
      <td><p>Internal. Function used inside categorization.</p></td>
    </tr>
    <tr>
      <th>abbrev_names</th>
      <td><p>single logical value that defaults to <code>TRUE</code>, in
which case the shorter human-readable names stored in e.g.
<code>ahrqComorbidNamesAbbrev</code> are applied to the data frame column names.</p></td>
    </tr>
    <tr>
      <th>hierarchy</th>
      <td><p>single logical value that defaults to <code>TRUE</code>, in which
case the hierarchy defined for the mapping is applied. E.g. in Elixhauser,
you can't have uncomplicated and complicated diabetes both flagged.</p></td>
    </tr>
    <tr>
      <th>single</th>
      <td><p>a logical value, if <code>TRUE</code> then use single level CCS,
otherwise use multi level</p></td>
    </tr>
    <tr>
      <th>lvl</th>
      <td><p>If multiple level CCS, then level must be selected as a number
between one and four.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The order of visits may change depending on the original sequence,
  and the underlying algorithm used. Usually this would be the order of the
  first occurrence of each visit/patient identifier, but this is not
  guaranteed unless <code>restore_id_order</code> is set to <code>TRUE</code>.</p>
<p><code>data.frame</code>s of patient data may have columns within them
  which are of class <code>icd9</code>, <code>icd10</code> etc., but do not themselves
  have a class: therefore, the S3 mechanism for dispatch is not suitable. I
  may add a wrapper function which looks inside a <code>data.frame</code> of
  comorbidities, and dispatches to the appropriate function, but right now
  the user must call the <code>icd9_</code> or <code>icd10_</code> prefixed function
  directly.</p>
    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    
<ul>
<li><p><code>icd10_comorbid</code>: ICD-10 comorbidities</p></li>
<li><p><code>icd9_comorbid</code>: Get comorbidities from <code>data.frame</code> of ICD-9
codes</p></li>
<li><p><code>icd9_comorbid_ahrq</code>: AHRQ comorbidities for ICD-9 codes</p></li>
<li><p><code>icd10_comorbid_ahrq</code>: AHRQ comorbidities for ICD-10 codes</p></li>
<li><p><code>icd9_comorbid_elix</code>: Elixhauser comorbidities for ICD-9 codes</p></li>
<li><p><code>icd10_comorbid_elix</code>: Elixhauser comorbidities for ICD-10 codes</p></li>
<li><p><code>icd9_comorbid_quan_elix</code>: Quan's Elixhauser comorbidities for ICD-9 codes</p></li>
<li><p><code>icd10_comorbid_quan_elix</code>: Quan's Elixhauser comorbidities for ICD-10 codes</p></li>
<li><p><code>icd9_comorbid_quan_deyo</code>: Quan's Deyo (Charlson) comorbidities for ICD-9 codes</p></li>
<li><p><code>icd10_comorbid_quan_deyo</code>: Quan's Deyo (Charlson) comorbidities for ICD-10 codes</p></li>
<li><p><code>icd9_comorbid_charlson</code>: Currently synonym for <code>icd9_comorbid_quan_deyo</code></p></li>
<li><p><code>icd10_comorbid_charlson</code>: Currently synonym for <code>icd10_comorbid_quan_deyo</code></p></li>
<li><p><code>comorbid_ccs</code>: Use AHRQ CCS for comorbidity classification</p></li>
<li><p><code>icd9_comorbid_ccs</code>: Compute AHRQ Clinical Classifications Software (CCS)
scores from ICD-9 codes</p></li>
<li><p><code>icd10_comorbid_ccs</code>: Compute AHRQ Clinical Classifications Software (CCS)
scores from ICD-10 codes</p></li>
<li><p><code>comorbid_ahrq</code>: AHRQ comorbidities, infers whether to use ICD-9 or
ICD-10 codes</p></li>
<li><p><code>comorbid_elix</code>: Elixhauser comorbidities, infers whether to use ICD-9 or
ICD-10 codes</p></li>
<li><p><code>comorbid_quan_elix</code>: Quan's Elixhauser comorbidities, infers whether to use
ICD-9 or ICD-10 codes</p></li>
<li><p><code>comorbid_quan_deyo</code>: Quan's Deyo (Charlson) comorbidities, infers whether to
use ICD-9 or ICD-10 codes</p></li>
<li><p><code>comorbid_charlson</code>: Calculate comorbidities using Charlson categories
according to Quan/Deyo ICD categories. Synonymous with
<code>link{comorbid_quan_deyo}</code> in this release.</p></li>
<li><p><code>comorbid_pccc_dx</code>: Calculate pediatric complex chronic conditions (PCCC) comorbidities</p>
<p>Unlike with ICD-9 and ICD-10 diagnostic codes, 'icd' doesn't
currently have a method for guessing which fields are procedure
codes, so <code>icd_name</code> must be specified for the <code>_pcs</code>
functions.</p></li>
<li><p><code>comorbid_pccc_pcs</code>: Calculate the PCCC comorbidities based
on procedure codes,</p></li>
<li><p><code>icd9_comorbid_pccc_dx</code>: Calculate PCCC comorbidities from ICD-9
diagnosis codes</p></li>
<li><p><code>icd10_comorbid_pccc_dx</code>: Calculate PCCC comorbidities from ICD-10
diagnosis codes</p></li>
<li><p><code>icd9_comorbid_pccc_pcs</code>: Calculate PCCC comorbidities from ICD-9
procedure codes</p></li>
<li><p><code>icd10_comorbid_pccc_pcs</code>: Calculate PCCC comorbidities from ICD-10
procedure codes</p></li>
</ul>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='icd9_map_single_ccs.html'>icd9_map_single_ccs</a></p>
<p>Consider using <code>comorbid_ahrq</code> instead of
  <code>comorbid_elix</code> for more recently updated mappings based on the
  Elixhauser scheme.</p>
<p>Other comorbidity computations: 
<code><a href='comorbid_hcc.html'>comorbid_hcc</a>()</code></p>
<p>Other comorbidities: 
<code><a href='comorbid_hcc.html'>comorbid_hcc</a>()</code>,
<code><a href='icd10_map_ahrq_pcs.html'>icd10_map_ahrq_pcs</a></code>,
<code><a href='icd9_map_ahrq.html'>icd9_map_ahrq</a></code>,
<code><a href='icd9_map_elix.html'>icd9_map_elix</a></code>,
<code><a href='icd9_map_hcc.html'>icd9_map_hcc</a></code>,
<code><a href='icd9_map_pccc.html'>icd9_map_pccc</a></code>,
<code><a href='icd9_map_quan_deyo.html'>icd9_map_quan_deyo</a></code>,
<code><a href='icd9_map_quan_elix.html'>icd9_map_quan_elix</a></code>,
<code><a href='icd9_map_single_ccs.html'>icd9_map_single_ccs</a></code></p>
<p>Other comorbidity computations: 
<code><a href='comorbid_hcc.html'>comorbid_hcc</a>()</code></p>
<p>Other comorbidities: 
<code><a href='comorbid_hcc.html'>comorbid_hcc</a>()</code>,
<code><a href='icd10_map_ahrq_pcs.html'>icd10_map_ahrq_pcs</a></code>,
<code><a href='icd9_map_ahrq.html'>icd9_map_ahrq</a></code>,
<code><a href='icd9_map_elix.html'>icd9_map_elix</a></code>,
<code><a href='icd9_map_hcc.html'>icd9_map_hcc</a></code>,
<code><a href='icd9_map_pccc.html'>icd9_map_pccc</a></code>,
<code><a href='icd9_map_quan_deyo.html'>icd9_map_quan_deyo</a></code>,
<code><a href='icd9_map_quan_elix.html'>icd9_map_quan_elix</a></code>,
<code><a href='icd9_map_single_ccs.html'>icd9_map_single_ccs</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>icd</span>)
<span class='no'>vermont_dx</span>[<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='fl'>1</span>:<span class='fl'>10</span>]</div><div class='output co'>#&gt;   visit_id   age_group    sex death DRG   DX1   DX2   DX3   DX4   DX5
#&gt; 1        7       40-44   male  TRUE 640 27801 03842 51881 41519 99591
#&gt; 2       10 75 and over female FALSE 470 71526 25000 42830  4280  4019
#&gt; 3       13 75 and over female FALSE 470 71535 59651 78052 27800 V8537
#&gt; 4       16       55-59 female FALSE 470 71535 49390 53081 27800  V140
#&gt; 5       37       70-74   male FALSE 462 71536  4241  2859  2720  4414</div><div class='input'><span class='co'># get first few rows and columns of Charlson comorbidities using Quan/Deyo</span>
<span class='co'># mapping of ICD-9 or ICD-10 codes Charlson categories</span>
<span class='fu'>comorbid_quan_deyo</span>(<span class='no'>vermont_dx</span>)[<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='fl'>1</span>:<span class='fl'>14</span>]</div><div class='output co'>#&gt;       MI   CHF   PVD Stroke Dementia Pulmonary Rheumatic   PUD LiverMild    DM
#&gt; 7  FALSE  TRUE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE FALSE
#&gt; 10 FALSE  TRUE FALSE  FALSE    FALSE      TRUE     FALSE FALSE     FALSE  TRUE
#&gt; 13 FALSE FALSE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE FALSE
#&gt; 16 FALSE FALSE FALSE  FALSE    FALSE      TRUE     FALSE FALSE     FALSE FALSE
#&gt; 37 FALSE FALSE  TRUE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE FALSE
#&gt;     DMcx Paralysis Renal Cancer
#&gt; 7  FALSE     FALSE  TRUE   TRUE
#&gt; 10 FALSE     FALSE FALSE  FALSE
#&gt; 13 FALSE     FALSE FALSE  FALSE
#&gt; 16 FALSE     FALSE FALSE  FALSE
#&gt; 37 FALSE     FALSE FALSE  FALSE</div><div class='input'>
<span class='co'># Note that the comorbidity calculations automatically finds the ICD code</span>
<span class='co'># columns, and uses 'wide' or 'long' format data.</span>

<span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span>(
  <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(
    <span class='fu'>comorbid_quan_deyo</span>(<span class='no'>vermont_dx</span>),
    <span class='fu'>comorbid_quan_deyo</span>(<span class='fu'><a href='wide_to_long.html'>wide_to_long</a></span>(<span class='no'>vermont_dx</span>))
  )
)

<span class='co'># get summary AHRQ (based on Elixhauser) comorbidities for the Uranium data:</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='fu'>comorbid_ahrq</span>(<span class='no'>uranium_pathology</span>))</div><div class='output co'>#&gt;     CHF           Valvular          PHTN            PVD         
#&gt;  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
#&gt;  FALSE:331       FALSE:305       FALSE:330       FALSE:264      
#&gt;  TRUE :3         TRUE :29        TRUE :4         TRUE :70       
#&gt;     HTN          Paralysis       NeuroOther      Pulmonary      
#&gt;  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
#&gt;  FALSE:225       FALSE:334       FALSE:304       FALSE:220      
#&gt;  TRUE :109                       TRUE :30        TRUE :114      
#&gt;      DM             DMcx         Hypothyroid       Renal        
#&gt;  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
#&gt;  FALSE:331       FALSE:334       FALSE:334       FALSE:328      
#&gt;  TRUE :3                                         TRUE :6        
#&gt;    Liver            PUD             HIV           Lymphoma      
#&gt;  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
#&gt;  FALSE:300       FALSE:330       FALSE:334       FALSE:334      
#&gt;  TRUE :34        TRUE :4                                        
#&gt;     Mets           Tumor         Rheumatic       Coagulopathy   
#&gt;  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
#&gt;  FALSE:270       FALSE:287       FALSE:330       FALSE:331      
#&gt;  TRUE :64        TRUE :47        TRUE :4         TRUE :3        
#&gt;   Obesity        WeightLoss      FluidsLytes     BloodLoss      
#&gt;  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
#&gt;  FALSE:328       FALSE:326       FALSE:333       FALSE:334      
#&gt;  TRUE :6         TRUE :8         TRUE :1                        
#&gt;    Anemia         Alcohol          Drugs         Psychoses      
#&gt;  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
#&gt;  FALSE:332       FALSE:334       FALSE:334       FALSE:333      
#&gt;  TRUE :2                                         TRUE :1        
#&gt;  Depression     
#&gt;  Mode :logical  
#&gt;  FALSE:334      
#&gt;                 </div><div class='input'>
<span class='no'>pts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='wide_vs_long.html'>icd_long_data</a></span>(
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"2"</span>, <span class='st'>"1"</span>, <span class='st'>"2"</span>, <span class='st'>"3"</span>, <span class='st'>"3"</span>),
  <span class='kw'>icd9</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"39891"</span>, <span class='st'>"40110"</span>, <span class='st'>"09322"</span>, <span class='st'>"41514"</span>, <span class='st'>"39891"</span>)
)
<span class='fu'>comorbid</span>(<span class='no'>pts</span>, <span class='no'>icd9_map_ahrq</span>, <span class='kw'>short_code</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='co'># visit_name is now sorted</span></div><div class='output co'>#&gt;     CHF Valvular  PHTN   PVD   HTN HTNcx Paralysis NeuroOther Pulmonary    DM
#&gt; 2  TRUE     TRUE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; 1 FALSE    FALSE FALSE FALSE  TRUE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; 3  TRUE    FALSE  TRUE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt;    DMcx Hypothyroid Renal Liver   PUD   HIV Lymphoma  Mets Tumor Rheumatic
#&gt; 2 FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; 1 FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; 3 FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt;   Coagulopathy Obesity WeightLoss FluidsLytes BloodLoss Anemia Alcohol Drugs
#&gt; 2        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; 1        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; 3        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt;   Psychoses Depression
#&gt; 2     FALSE      FALSE
#&gt; 1     FALSE      FALSE
#&gt; 3     FALSE      FALSE</div><div class='input'><span class='no'>pts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='wide_vs_long.html'>icd_long_data</a></span>(
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"1"</span>, <span class='st'>"2"</span>, <span class='st'>"3"</span>, <span class='st'>"4"</span>, <span class='st'>"4"</span>),
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"20084"</span>, <span class='st'>"1742"</span>, <span class='st'>"30410"</span>, <span class='st'>"41514"</span>, <span class='st'>"95893"</span>),
  <span class='kw'>date</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(
    <span class='st'>"2011-01-01"</span>, <span class='st'>"2011-01-02"</span>, <span class='st'>"2011-01-03"</span>,
    <span class='st'>"2011-01-04"</span>, <span class='st'>"2011-01-04"</span>
  ))
)

<span class='no'>pt_hccs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='comorbid_hcc.html'>comorbid_hcc</a></span>(<span class='no'>pts</span>, <span class='kw'>date_name</span> <span class='kw'>=</span> <span class='st'>"date"</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>pt_hccs</span>)</div><div class='output co'>#&gt;   visit_name       date hcc
#&gt; 1          1 2011-01-01   9
#&gt; 2          2 2011-01-02  10
#&gt; 3          3 2011-01-03  52
#&gt; 4          4 2011-01-04 164</div><div class='input'>
<span class='no'>pts10</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='wide_vs_long.html'>icd_long_data</a></span>(
  <span class='kw'>visit_name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>, <span class='st'>"d"</span>, <span class='st'>"e"</span>),
  <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"I058"</span>, <span class='fl'>NA</span>, <span class='st'>"T82817A"</span>, <span class='st'>""</span>, <span class='st'>"I69369"</span>),
  <span class='kw'>date</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(
    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"2011-01-01"</span>, <span class='st'>"2011-01-02"</span>, <span class='st'>"2011-01-03"</span>, <span class='st'>"2011-01-03"</span>, <span class='st'>"2011-01-03"</span>)
  )
)

<span class='fu'>icd10_comorbid</span>(<span class='no'>pts10</span>, <span class='kw'>map</span> <span class='kw'>=</span> <span class='no'>icd10_map_ahrq</span>)</div><div class='output co'>#&gt;     CHF Valvular  PHTN   PVD   HTN HTNcx Paralysis NeuroOther Pulmonary    DM
#&gt; a FALSE     TRUE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; b FALSE    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; c FALSE    FALSE  TRUE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; d FALSE    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; e FALSE    FALSE FALSE FALSE FALSE FALSE      TRUE      FALSE     FALSE FALSE
#&gt;    DMcx Hypothyroid Renal Liver   PUD   HIV Lymphoma  Mets Tumor Rheumatic
#&gt; a FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; b FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; c FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; d FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; e FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt;   Coagulopathy Obesity WeightLoss FluidsLytes BloodLoss Anemia Alcohol Drugs
#&gt; a        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; b        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; c        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; d        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; e        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt;   Psychoses Depression
#&gt; a     FALSE      FALSE
#&gt; b     FALSE      FALSE
#&gt; c     FALSE      FALSE
#&gt; d     FALSE      FALSE
#&gt; e     FALSE      FALSE</div><div class='input'><span class='co'># or if library(icd) hasn't been called first:</span>
<span class='kw pkg'>icd</span><span class='kw ns'>::</span><span class='fu'>icd10_comorbid</span>(<span class='no'>pts10</span>, <span class='kw'>map</span> <span class='kw'>=</span> <span class='kw pkg'>icd</span><span class='kw ns'>::</span><span class='no'><a href='icd9_map_ahrq.html'>icd10_map_ahrq</a></span>)</div><div class='output co'>#&gt;     CHF Valvular  PHTN   PVD   HTN HTNcx Paralysis NeuroOther Pulmonary    DM
#&gt; a FALSE     TRUE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; b FALSE    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; c FALSE    FALSE  TRUE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; d FALSE    FALSE FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE
#&gt; e FALSE    FALSE FALSE FALSE FALSE FALSE      TRUE      FALSE     FALSE FALSE
#&gt;    DMcx Hypothyroid Renal Liver   PUD   HIV Lymphoma  Mets Tumor Rheumatic
#&gt; a FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; b FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; c FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; d FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; e FALSE       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt;   Coagulopathy Obesity WeightLoss FluidsLytes BloodLoss Anemia Alcohol Drugs
#&gt; a        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; b        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; c        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; d        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; e        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt;   Psychoses Depression
#&gt; a     FALSE      FALSE
#&gt; b     FALSE      FALSE
#&gt; c     FALSE      FALSE
#&gt; d     FALSE      FALSE
#&gt; e     FALSE      FALSE</div><div class='input'><span class='co'># or most simply:</span>
<span class='kw pkg'>icd</span><span class='kw ns'>::</span><span class='fu'>icd10_comorbid_ahrq</span>(<span class='no'>pts10</span>)</div><div class='output co'>#&gt;     CHF Valvular  PHTN   PVD   HTN Paralysis NeuroOther Pulmonary    DM  DMcx
#&gt; a FALSE     TRUE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE FALSE
#&gt; b FALSE    FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE FALSE
#&gt; c FALSE    FALSE  TRUE FALSE FALSE     FALSE      FALSE     FALSE FALSE FALSE
#&gt; d FALSE    FALSE FALSE FALSE FALSE     FALSE      FALSE     FALSE FALSE FALSE
#&gt; e FALSE    FALSE FALSE FALSE FALSE      TRUE      FALSE     FALSE FALSE FALSE
#&gt;   Hypothyroid Renal Liver   PUD   HIV Lymphoma  Mets Tumor Rheumatic
#&gt; a       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; b       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; c       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; d       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt; e       FALSE FALSE FALSE FALSE FALSE    FALSE FALSE FALSE     FALSE
#&gt;   Coagulopathy Obesity WeightLoss FluidsLytes BloodLoss Anemia Alcohol Drugs
#&gt; a        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; b        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; c        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; d        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt; e        FALSE   FALSE      FALSE       FALSE     FALSE  FALSE   FALSE FALSE
#&gt;   Psychoses Depression
#&gt; a     FALSE      FALSE
#&gt; b     FALSE      FALSE
#&gt; c     FALSE      FALSE
#&gt; d     FALSE      FALSE
#&gt; e     FALSE      FALSE</div><div class='input'>
<span class='co'># specify a simple custom comorbidity map:</span>
<span class='no'>my_map</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
  <span class='st'>"malady"</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"100"</span>, <span class='st'>"2000"</span>),
  <span class='st'>"ailment"</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"003"</span>, <span class='st'>"040"</span>)
)
<span class='no'>two_pts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
  <span class='kw'>visit_id</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"v01"</span>, <span class='st'>"v01"</span>, <span class='st'>"v02"</span>, <span class='st'>"v02"</span>),
  <span class='kw'>icd9</span> <span class='kw'>=</span> <span class='fu'><a href='set_icd_class.html'>as.icd9</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"040"</span>, <span class='st'>"000"</span>, <span class='st'>"100"</span>, <span class='st'>"000"</span>)),
  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)
<span class='fu'>comorbid</span>(<span class='no'>two_pts</span>, <span class='kw'>map</span> <span class='kw'>=</span> <span class='no'>my_map</span>)</div><div class='output co'>#&gt;     malady ailment
#&gt; v01  FALSE    TRUE
#&gt; v02   TRUE   FALSE</div><div class='input'><span class='co'># not pediatric data, but let's look for this example</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>icd9_comorbid_pccc_dx</span>(<span class='no'>vermont_dx</span>))</div><div class='output co'>#&gt;    Neuromusc   CVD Respiratory Renal    GI HematoImmu Metabolic CongeniGenetic
#&gt; 7      FALSE  TRUE       FALSE  TRUE FALSE      FALSE     FALSE          FALSE
#&gt; 10     FALSE  TRUE       FALSE FALSE FALSE      FALSE      TRUE          FALSE
#&gt; 13     FALSE FALSE       FALSE FALSE FALSE      FALSE     FALSE          FALSE
#&gt; 16     FALSE FALSE       FALSE FALSE FALSE      FALSE     FALSE          FALSE
#&gt; 37     FALSE FALSE       FALSE FALSE FALSE      FALSE      TRUE          FALSE
#&gt; 41     FALSE FALSE       FALSE FALSE FALSE      FALSE     FALSE          FALSE
#&gt;    Malignancy Neonatal TechDep Transplant
#&gt; 7        TRUE    FALSE   FALSE      FALSE
#&gt; 10      FALSE    FALSE   FALSE      FALSE
#&gt; 13      FALSE    FALSE   FALSE      FALSE
#&gt; 16      FALSE    FALSE   FALSE      FALSE
#&gt; 37      FALSE    FALSE   FALSE      FALSE
#&gt; 41      FALSE    FALSE   FALSE      FALSE</div><div class='input'><span class='co'># Six random codes from each PCCC procedure code map. 'icd' will use</span>
<span class='co'># an heuristic to guess whether ICD-9 or ICD-10:</span>
<span class='no'>pts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
  <span class='kw'>encounters</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>10</span>, <span class='fl'>11</span>, <span class='fl'>12</span>),
  <span class='kw'>icd9_pcs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"0152"</span>, <span class='st'>"304"</span>, <span class='st'>"0050"</span>),
  <span class='kw'>icd10_pcs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"0B110Z4"</span>, <span class='st'>"02YA0Z2"</span>, <span class='st'>"031209D"</span>)
)
<span class='fu'>comorbid_pccc_pcs</span>(<span class='no'>pts</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='st'>"icd9_pcs"</span>, <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    Neuromusc CVD Respiratory Renal GI HematoImmu Metabolic CongeniGenetic
#&gt; 10         1   0           0     0  0          0         0              0
#&gt; 11         0   0           1     0  0          0         0              0
#&gt; 12         0   1           0     0  0          0         0              0
#&gt;    Malignancy Neonatal TechDep Transplant
#&gt; 10          0        0       0          0
#&gt; 11          0        0       0          0
#&gt; 12          0        0       1          0</div><div class='input'><span class='fu'>comorbid_pccc_pcs</span>(<span class='no'>pts</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='st'>"icd10_pcs"</span>, <span class='kw'>return_binary</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    Neuromusc CVD Respiratory Renal GI HematoImmu Metabolic CongeniGenetic
#&gt; 10         0   0           1     0  0          0         0              0
#&gt; 11         0   1           0     0  0          0         0              0
#&gt; 12         0   0           0     1  0          0         0              0
#&gt;    Malignancy Neonatal TechDep Transplant
#&gt; 10          0        0       0          0
#&gt; 11          0        0       0          1
#&gt; 12          0        0       1          0</div><div class='input'>
<span class='co'># All ICD-9 procedure codes are numeric, some ICD-10 procedure codes</span>
<span class='co'># are numeric, so best to call functions directly:</span>
<span class='no'>pts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>encounters</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>100</span>), <span class='kw'>icd10_pcs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"0016070"</span>))
<span class='fu'>icd10_comorbid_pccc_pcs</span>(<span class='no'>pts</span>, <span class='kw'>icd_name</span> <span class='kw'>=</span> <span class='st'>"icd10_pcs"</span>)</div><div class='output co'>#&gt;     Neuromusc   CVD Respiratory Renal    GI HematoImmu Metabolic CongeniGenetic
#&gt; 100      TRUE FALSE       FALSE FALSE FALSE      FALSE     FALSE          FALSE
#&gt;     Malignancy Neonatal TechDep Transplant
#&gt; 100      FALSE    FALSE   FALSE      FALSE</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jack O. Wasey, Michel Lang, R Core Team.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '797795ae271734faa8bc9b1f4aaae82b',
    indexName: 'icd',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


